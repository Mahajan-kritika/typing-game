<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Typing Game - Level Up Your Skills</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');
  body {
    margin: 0;
    background: linear-gradient(135deg, #667eea, #764ba2);
    font-family: 'Roboto Mono', monospace;
    color: #fff;
    display: flex;
    flex-direction: column;
    height: 100vh;
    align-items: center;
    justify-content: space-between;
    overflow: hidden;
    user-select: none;
  }
  header {
    padding: 20px 0 0 0;
    font-size: 2.2rem;
    font-weight: 700;
    letter-spacing: 2px;
    text-shadow: 0 0 6px rgba(0,0,0,0.3);
  }
  main {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    max-width: 700px;
    width: 90vw;
  }
  #text-display {
    font-size: 1.9rem;
    line-height: 2.6rem;
    border-radius: 10px;
    background: rgba(255,255,255,0.15);
    padding: 25px 30px;
    margin-bottom: 30px;
    min-height: 120px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.2);
  }
  #text-display .correct {
    color: #4caf50;
  }
  #text-display .incorrect {
    color: #e74c3c;
    text-decoration: underline;
  }
  #text-input {
    font-size: 1.7rem;
    padding: 12px 20px;
    border-radius: 8px;
    border: none;
    width: 100%;
    box-sizing: border-box;
    outline: none;
    font-family: 'Roboto Mono', monospace;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  }
  #text-input:focus {
    box-shadow: 0 0 15px #76c7c0;
  }
  #stats {
    display: flex;
    justify-content: space-around;
    margin-top: 20px;
    font-size: 1.3rem;
    user-select: none;
  }
  #level {
    font-weight: 700;
    font-size: 1.5rem;
  }
  #timer {
    font-weight: 700;
  }
  #score {
    font-weight: 700;
  }
  footer {
    text-align: center;
    padding: 15px 10px 25px 10px;
    font-size: 0.9rem;
    color: #ddd;
  }
  #message {
    text-align: center;
    margin-bottom: 25px;
    font-size: 1.4rem;
    font-weight: 600;
    min-height: 28px;
  }
  /* Cool glowing button for restart */
  #restart-btn {
    background: #76c7c0;
    border: none;
    padding: 12px 30px;
    border-radius: 30px;
    font-weight: 700;
    font-size: 1.2rem;
    color: #fff;
    cursor: pointer;
    box-shadow: 0 0 15px #76c7c0aa;
    transition: background 0.3s ease;
    margin: 15px auto 0 auto;
    display: block;
  }
  #restart-btn:hover {
    background: #4aa29b;
    box-shadow: 0 0 25px #4aa29bcc;
  }

  /* Responsive tweaks */
  @media (max-width: 480px) {
    #text-display {
      font-size: 1.4rem;
      padding: 20px;
      min-height: 100px;
    }
    #text-input {
      font-size: 1.3rem;
      padding: 10px 15px;
    }
  }
</style>
</head>
<body>

<header>Typing Game - Level Up Your Skills</header>

<main>
  <div id="message"></div>
  <div id="text-display"></div>
  <input type="text" id="text-input" placeholder="Start typing here..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
  <div id="stats">
    <div id="level">Level: 1 (Easy)</div>
    <div id="timer">Time: 60s</div>
    <div id="score">Score: 0</div>
  </div>
  <button id="restart-btn" style="display:none;">Restart Game</button>
</main>

<footer>
  Made with ❤️ by ChatGPT | Typing game to improve your speed & accuracy.
</footer>

<script>
(() => {
  const textDisplay = document.getElementById('text-display');
  const textInput = document.getElementById('text-input');
  const message = document.getElementById('message');
  const levelDisplay = document.getElementById('level');
  const timerDisplay = document.getElementById('timer');
  const scoreDisplay = document.getElementById('score');
  const restartBtn = document.getElementById('restart-btn');

  // Word lists by difficulty
  const levels = [
    {
      name: 'Easy',
      time: 60,
      words: [
        'cat', 'dog', 'sun', 'cup', 'book', 'tree', 'fish', 'car', 'hat', 'pen',
        'red', 'blue', 'run', 'ball', 'bird', 'milk', 'cup', 'day', 'hat', 'fun'
      ]
    },
    {
      name: 'Medium',
      time: 75,
      words: [
        'computer', 'javascript', 'typing', 'function', 'variable', 'object', 'array', 'window', 'document', 'element',
        'button', 'keyboard', 'program', 'python', 'internet', 'browser', 'screen', 'mouse', 'design', 'language'
      ]
    },
    {
      name: 'Hard',
      time: 90,
      words: [
        'asynchronous', 'declaration', 'expression', 'inheritance', 'polymorphism', 'encapsulation', 'abstraction',
        'algorithm', 'optimization', 'concurrency', 'recursion', 'iteration', 'computation', 'synchronization',
        'initialization', 'configuration', 'implementation', 'architecture', 'integration', 'virtualization'
      ]
    },
    {
      name: 'Expert',
      time: 120,
      words: [
        'multithreading', 'microprocessor', 'serialization', 'deserialization', 'cryptography', 'parallelism',
        'virtualization', 'middleware', 'refactoring', 'benchmarking', 'profiling', 'concurrency', 'synchronization',
        'asynchronous', 'architecture', 'optimization', 'dependency', 'encapsulation', 'polymorphism', 'inheritance'
      ]
    }
  ];

  let currentLevel = 0;
  let words = [];
  let currentWordIndex = 0;
  let timer;
  let timeLeft;
  let score = 0;
  let correctChars = 0;
  let totalChars = 0;
  let started = false;
  let currentInput = '';

  function shuffleArray(arr) {
    return arr.sort(() => Math.random() - 0.5);
  }

  // Initialize or reset game state for the current level
  function initializeLevel(levelIndex) {
    currentLevel = levelIndex;
    words = shuffleArray([...levels[levelIndex].words]);
    currentWordIndex = 0;
    timeLeft = levels[levelIndex].time;
    score = 0;
    correctChars = 0;
    totalChars = 0;
    started = false;
    currentInput = '';
    message.textContent = `Level ${currentLevel + 1} - ${levels[currentLevel].name}: Type the words as fast and accurately as you can!`;
    updateLevelDisplay();
    updateTimerDisplay();
    updateScoreDisplay();
    displayNextWord();
    textInput.value = '';
    textInput.disabled = false;
    restartBtn.style.display = 'none';
    textInput.focus();
  }

  // Update displays
  function updateLevelDisplay() {
    levelDisplay.textContent = `Level: ${currentLevel + 1} (${levels[currentLevel].name})`;
  }
  function updateTimerDisplay() {
    timerDisplay.textContent = `Time: ${timeLeft}s`;
  }
  function updateScoreDisplay() {
    scoreDisplay.textContent = `Score: ${score}`;
  }

  // Show the next word on screen with span tags for each char
  function displayNextWord() {
    if (currentWordIndex >= words.length) {
      // Reshuffle words when done to keep game going
      words = shuffleArray([...levels[currentLevel].words]);
      currentWordIndex = 0;
    }
    const word = words[currentWordIndex];
    textDisplay.innerHTML = '';
    for (const char of word) {
      const span = document.createElement('span');
      span.textContent = char;
      textDisplay.appendChild(span);
    }
  }

  // Start the countdown timer
  function startTimer() {
    if (started) return;
    started = true;
    timer = setInterval(() => {
      timeLeft--;
      updateTimerDisplay();
      if (timeLeft <= 0) {
        clearInterval(timer);
        endLevel();
      }
    }, 1000);
  }

  // End of level logic
  function endLevel() {
    textInput.disabled = true;
    message.textContent = `Time's up! Your score: ${score}.`;
    restartBtn.style.display = 'block';

    // Auto-level-up logic based on score and accuracy
    const accuracy = totalChars === 0 ? 0 : Math.round((correctChars / totalChars) * 100);
    if (accuracy >= 85 && score >= levels[currentLevel].words.length * 2 && currentLevel < levels.length - 1) {
      message.textContent += ' Great job! Moving to the next level.';
      initializeLevel(currentLevel + 1);
    } else if (accuracy < 50 && currentLevel > 0) {
      message.textContent += ' Accuracy low. Dropping to easier level.';
      initializeLevel(currentLevel - 1);
    } else {
      message.textContent += ' Try again to improve your score!';
    }
  }

  // Check input on every keypress
  textInput.addEventListener('input', () => {
    startTimer();
    const word = words[currentWordIndex];
    currentInput = textInput.value;
    totalChars++;

    // Highlight characters according to correctness
    const spans = textDisplay.querySelectorAll('span');
    let correctSoFar = true;
    correctChars = 0;
    for (let i = 0; i < spans.length; i++) {
      const char = currentInput[i];
      if (char == null) {
        spans[i].className = '';
        correctSoFar = false;
      } else if (char === spans[i].textContent) {
        spans[i].className = 'correct';
        correctChars++;
      } else {
        spans[i].className = 'incorrect';
        correctSoFar = false;
      }
    }

    // If the whole word is typed correctly
    if (currentInput === word) {
      score += word.length * 10; // reward longer words more
      updateScoreDisplay();
      textInput.value = '';
      currentWordIndex++;
      displayNextWord();
    }
  });

  restartBtn.addEventListener('click', () => {
    initializeLevel(0);
    textInput.focus();
  });

  // Start the first level
  initializeLevel(0);
})();
</script>

</body>
</html>
